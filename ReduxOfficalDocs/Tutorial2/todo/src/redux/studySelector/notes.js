// https://juejin.im/post/6844903828895055885

// selectoræ˜¯æˆ‘ä»¬ç¼–å†™çš„ä¸€ä¸ªå°å‡½æ•°,æ¥å—æ•´ä¸ªReduxçš„state,å¹¶ä»ä¸­è¿”å›æŒ‘é€‰å‡ºçš„å€¼.

// ä½ çŸ¥é“mapStateToPropsæ˜¯å¦‚ä½•å·¥ä½œçš„å—?äº†è§£å®ƒæ˜¯å¦‚ä½•æ¥å—æ•´ä¸ªstate,ç­›é€‰å‡ºå€¼å¾—å—?å¦‚æœä½ äº†è§£è¯, SelectoråŸºæœ¬ä¸Šåšç€åŒæ ·çš„å·¥ä½œ,é™„å¸¦çš„å¥½å¤„æ˜¯,selectorè¿˜åŒæ—¶é€šè¿‡ç¼“å­˜ä¸å˜çš„stateæå‡äº†æ€§èƒ½.çš„ç¡®å¦‚æ­¤,Selectorå¯ä»¥æ”¹å–„æ€§èƒ½.


// Reduxä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªstore,ä½ å¯ä»¥æ”¾ç½®state,åœ¨ç¨å¤§å‹çš„appä¸­,stateé€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡çš„æ¯ä¸ªé”®éƒ½ç®¡ç†ç€ä¸€ä¸ªç‹¬ç«‹çš„reducer.[^è¯‘æ³¨:å¦‚æœä½ ç°åœ¨è¿˜ä¸çŸ¥é“reduceræ˜¯ä»€ä¹ˆ,å°±ä¸è¦å†å¾€ä¸‹çœ‹äº†, éœ€è¦å­¦ä¹ Reduxçš„åŸºç¡€çŸ¥è¯†]
// å‡è®¾æˆ‘ä»¬çš„stateå¯¹è±¡ç»“æ„å¦‚ä¸‹:

// {
//     currentUser: {
//       token,
//       userId,
//       username
//     },
//     shoppingCart: {
//       itemIds,
//       loading,
//       error
//     },
//     products: {
//       itemsById,
//       loading,
//       error
//     }
//   }

// åœ¨è¿™ä¸ªè™šæ„çš„å®ä¾‹ä¸­,ä¿å­˜äº†ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯,shopä¸­çš„è´§ç‰©,ä»¥åŠç”¨æˆ·è´­ç‰©è½¦ä¸­çš„å•†å“.
// è¿™é‡Œçš„æ•°æ®æ˜¯ç»è¿‡èŒƒå¼åŒ–(normalized)çš„,æ‰€ä»¥è´­ç‰©è½¦ä¸­çš„å•†å“çœ‹åˆ°çš„åªæ˜¯æŒ‡å‘å®ä½“è´§ç‰©çš„ID.
// å½“ä¸€ä¸ªç”¨æˆ·åœ¨è´­ç‰©è½¦ä¸­æ·»åŠ ä¸€ä»¶å•†å“,å•†å“æœ¬èº«å¹¶æ²¡æœ‰è¢«å¤åˆ¶çš„è´­ç‰©è½¦ä¸­-åªæœ‰å•†å“çš„IDæ·»åŠ åˆ° shoppongCart.itemIdsæ•°ç»„ä¸­.
  

// ------------------------------------é¦–å…ˆçœ‹çœ‹æ²¡æœ‰ä½¿ç”¨selectorçš„æƒ…å†µ------------------------------------
// åœ¨éœ€è¦ä»Reduxçš„stateæå–æ•°æ®å¹¶æ³¨å…¥åˆ°Reactç»„ä»¶çš„æ—¶å€™, 
// æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªmapStateToPropså‡½æ•°,ç”¨äºæ¥å—æ•´ä¸ªstate,å¹¶é€‰æ‹©å‡ºç»„ä»¶éœ€è¦çš„éƒ¨åˆ†.

// ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥è¦åšçš„äº‹æƒ…ï¼šå‡è®¾ä½ éœ€è¦å±•ç¤ºç”¨æˆ·è´­ç‰©è½¦ä¸­çš„å•†å“åˆ—è¡¨.å› æ­¤éœ€è¦itemsğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥

// ä½†æ˜¯,shoppingCartä¸­å¹¶æ²¡æœ‰itemsè¿™ä¸€é¡¹.åªæœ‰itemsä»¬çš„IDs. 
// ä½ éœ€è¦ç”¨æ¯ä¸ªIDåœ¨products.itemsæ•°ç»„ä¸­æŸ¥æ‰¾å‡ºå¯¹åº”çš„å•†å“ä¿¡æ¯. ä¸‹é¢æ˜¯å…·ä½“çš„æ‰§è¡Œæ–¹æ³•:

// function mapStateToProps(state){
//     return {
//         items: state.shoppingCart.itemIds.map(id => 
//             state.products.itemsById[id]    
//         )
//     }
// }


// ------------------------------------ä¿®æ”¹äº†Stateçš„ç»“æ„,mapStateToPropså°±æ²¡åŠæ³•æ­£å¸¸å·¥ä½œäº†------------------------------------
// ç°åœ¨å‡è®¾ä½ (æˆ–è€…æ˜¯å¼€å‘ç»„ä¸­çš„å…¶ä»–äºº)çªå‘å¥‡æƒ³, shoppingCartåº”è¯¥æ˜¯currentUserçš„ä¸€ä¸ªå±æ€§è€Œä¸æ˜¯ç‹¬ç«‹çš„å±æ€§.é‚£ä¹ˆç°åœ¨çš„Stateç»“æ„å˜æˆä¸‹é¢çš„æ ·å­:
// {
//     currentUser: {
//       token,
//       userId,
//       username,
//       shoppingCart: {
//         itemIds,//<<<<<<<<
//         loading,
//         error
//       },
//     },
//     products: {
//       itemsById,//<<<<<<<<<
//       loading,
//       error
//     }
//   }
// çœ‹çœ‹ä½ å¹²çš„å¥½äº‹,ä¹‹å‰å®šä¹‰å¥½çš„mapStateToPropså‡½æ•°å°±æ¯äº†. åŸæ¥æŒ‡å‘state.shoppingCart,ç°åœ¨æŒ‡å‘äº†state.currentUser.shoppingCart.
// å¦‚æœåœ¨ä»£ç ä¸­æœ‰ä¸€å¤§å †çš„ä»£ç éƒ½å¼•ç”¨äº†state.shoppongCart,é‚£å¯æœ‰çš„æ”¹äº†.åœ¨ä½ æ„è¯†åˆ°å®Œå…¨æœ‰å¿…è¦å¯¹stateé‡æ–°ç»„ç»‡çš„æ—¶å€™,è¿™ä¸ªæ›´æ–°è¿‡ç¨‹ä¼šé˜»ç¢ä½ å®Œæˆä»»åŠ¡.
// å¦‚æœæˆ‘ä»¬åªæœ‰å”¯ä¸€çš„é€”å¾„æŠŠæ‰€æœ‰çš„stateé›†ä¸­ç®¡ç†, è¿˜æœ‰ä¸€äº›å‡½æ•°,è°ƒç”¨æ—¶å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®...
// æ˜¯çš„,è¿™æ­£æ˜¯selectoræ‰€åšçš„å·¥ä½œ:)


// ------------------------------------é‡æ„:ç¼–å†™ä¸€ä¸ªç®€å•çš„selector------------------------------------
// æ¥é‡æ–°ç¼–å†™ä¸€ä¸‹è¢«ç ´åæ‰çš„mapStateToProps, æŠŠstateçš„ç­›é€‰æ”¾åœ¨selectorä¸­å®Œæˆ.
// // è¿™ä¸ªå‡½æ•°æ”¾åœ¨å…¨å±€ä½œç”¨äºå†…
// // ä¾‹å¦‚å‘½åä¸º selectors.js,
// // åœ¨éœ€è¦è®¿é—®è¿™ä¸€éƒ¨åˆ†stateçš„æ—¶å€™å¯¼å…¥è¿™ä¸ªå‡½æ•°å°±å¯ä»¥äº†
// function selectShoppingCartItems(state) {
//     return state.currentUser.shoppingCart.itemIds.map( id =>
//         state.products.itemsById[id]
//     );
// }
// function mapStateToProps(state) {
//     return {
//         items: selectShoppingCartItems(state)
//     }
// }

// ä¸‹ä¸€æ¬¡,å¦‚æœstateçš„ç»„ç»‡ç»“æ„å‘ç”Ÿå˜åŒ–, ä½ åªéœ€è¦æ›´æ–°ä¸€ä¸ªselectorå‡½æ•°å°±å®Œæˆäº†æ‰€æœ‰çš„å·¥ä½œ.è¶…çº§ç®€å•.
// è¯´åˆ°å‘½å,selectorå‡½æ•°çš„çš„å¸¸è§å‰ç¼€æ˜¯selectæˆ–è€…get.å½“ç„¶éµå¾ªä½ appä¸­å…¶ä»–çš„ä¼ ç»Ÿå®šä¹‰ä¹Ÿå®Œå…¨å¯ä»¥.